import{z as j,c as h,b as T,d as k,e as U,f as P,i as v,k as C,l as I,r as $,t as L,j as r,F as w,m as M,n as N,o as _,p as S,I as F,q as E,s as A,B}from"./index-Cz0sLFk-.js";import{P as q}from"./index-CP8KZI2w.js";import{f as z}from"./errorFormHandler-CQuQKGXn.js";const V=j.object({email:j.string().email({message:"Please enter a valid email address."}),password:j.string().min(6,{message:"Password must be at least 6 characters."}),userName:j.string().min(2,{message:"Username must be at least 2 characters."})}),D=()=>{const e=h.c(8),s=T(G),m=k(H);let o;e[0]!==s||e[1]!==m?(o={mutationFn:J,onError:K,onSuccess:c=>{const{user:u,accessToken:f}=c;m(f),s(u),P.success("New user created",{description:`The User ${u.userName} was successfully created`})}},e[0]=s,e[1]=m,e[2]=o):o=e[2];const{mutate:a,error:t,data:l,isPending:n}=U(o);let i;return e[3]!==a||e[4]!==t||e[5]!==n||e[6]!==l?(i={createNewUser:a,isLoading:n,errorCreateNewUser:t,newUserCreated:l},e[3]=a,e[4]=t,e[5]=n,e[6]=l,e[7]=i):i=e[7],i};function G(e){return e.setCurrentUser}function H(e){return e.setToken}async function J(e){return(await v.post("/register",e)).data}function K(){return P.error("new user not created",{description:"There has been an error"})}const O={email:"",password:"",userName:""},Q=()=>{var y,R;const e=h.c(19),s=C();let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={resolver:L(V),defaultValues:O},e[0]=m):m=e[0];const o=I(m),{isLoading:a,newUserCreated:t,createNewUser:l,errorCreateNewUser:n}=D();let i;e[1]!==s||e[2]!==((y=t==null?void 0:t.user)==null?void 0:y.id)?(i=()=>{var d;(d=t==null?void 0:t.user)!=null&&d.id&&s("/profile")},e[1]=s,e[2]=(R=t==null?void 0:t.user)==null?void 0:R.id,e[3]=i):i=e[3];let c;e[4]!==s||e[5]!==t?(c=[t,s],e[4]=s,e[5]=t,e[6]=c):c=e[6],$.useEffect(i,c);let u,f;e[7]!==n||e[8]!==o?(u=()=>{if(n){const[d,b]=z(n);o.setError(d,b)}},f=[n,o],e[7]=n,e[8]=o,e[9]=u,e[10]=f):(u=e[9],f=e[10]),$.useEffect(u,f);let p;e[11]!==l?(p=function(b){l(b)},e[11]=l,e[12]=p):p=e[12];const g=p;let x;return e[13]!==n||e[14]!==o||e[15]!==a||e[16]!==t||e[17]!==g?(x={form:o,onSubmit:g,isLoading:a,errorCreateNewUser:n,newUserCreated:t},e[13]=n,e[14]=o,e[15]=a,e[16]=t,e[17]=g,e[18]=x):x=e[18],x},W=()=>{const e=h.c(17),{form:s,onSubmit:m}=Q();let o;e[0]!==s||e[1]!==m?(o=s.handleSubmit(m),e[0]=s,e[1]=m,e[2]=o):o=e[2];let a,t,l;e[3]!==s.control?(a=r.jsx(w,{control:s.control,name:"userName",render:X}),t=r.jsx(w,{control:s.control,name:"email",render:Y}),l=r.jsx(w,{control:s.control,name:"password",render:Z}),e[3]=s.control,e[4]=a,e[5]=t,e[6]=l):(a=e[4],t=e[5],l=e[6]);let n,i;e[7]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx(A,{}),i=r.jsx(B,{type:"submit",className:"w-full",children:"Submit"}),e[7]=n,e[8]=i):(n=e[7],i=e[8]);let c;e[9]!==o||e[10]!==a||e[11]!==t||e[12]!==l?(c=r.jsxs("form",{onSubmit:o,className:"space-y-8",children:[a,t,l,n,i]}),e[9]=o,e[10]=a,e[11]=t,e[12]=l,e[13]=c):c=e[13];let u;return e[14]!==s||e[15]!==c?(u=r.jsx(M,{...s,children:c}),e[14]=s,e[15]=c,e[16]=u):u=e[16],u};function X(e){const{field:s}=e;return r.jsxs(N,{children:[r.jsx(_,{children:"Name"}),r.jsx(S,{children:r.jsx(F,{placeholder:"Name",...s,autoComplete:"username"})}),r.jsx(E,{})]})}function Y(e){const{field:s}=e;return r.jsxs(N,{children:[r.jsx(_,{children:"Email"}),r.jsx(S,{children:r.jsx(F,{placeholder:"E-mail",...s,autoComplete:"email"})}),r.jsx(E,{})]})}function Z(e){const{field:s}=e;return r.jsxs(N,{children:[r.jsx(_,{children:"Password"}),r.jsx(S,{children:r.jsx(F,{placeholder:"Password",type:"password",...s,autoComplete:"new-password"})}),r.jsx(E,{})]})}const re=()=>{const e=h.c(1);let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsxs("article",{className:"flex flex-wrap flex-col max-w-md m-auto",children:[r.jsx(q,{title:"Register"}),r.jsx(W,{})]}),e[0]=s):s=e[0],s};export{re as default};
